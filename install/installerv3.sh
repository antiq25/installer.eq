#!/bin/sh

brew tap "felixkratz/formulae"
brew tap "homebrew/bundle"
brew tap "homebrew/cask-fonts"
brew tap "homebrew/cask-versions"
brew tap "homebrew/services"
brew tap "koekeishiya/formulae"
brew install "abseil"
brew install "ack"
brew install "act"
brew install "aom"
brew install "gcc"
brew install "hdf5"
brew install "armadillo"
brew install "autoconf"
brew install "c-ares"
brew install "fmt"
brew install "grpc"
brew install "nlohmann-json"
brew install "spdlog"
brew install "bear"
brew install "bison"
brew install "blueutil"
brew install "boost"
brew install "btop"
brew install "cairo"
brew install "ccls"
brew install "cgl"
brew install "chafa"
brew install "cmake"
brew install "coreutils"
brew install "curl"
brew install "python@3.11"
brew install "dooit"
brew install "node"
brew install "eslint"
brew install "exa"
brew install "findutils"
brew install "fish"
brew install "fontforge"
brew install "gd"
brew install "gh"
brew install "ghostscript"
brew install "git"
brew install "git-lfs"
brew install "glfw"
brew install "glslang"
brew install "gnu-sed"
brew install "gnuplot"
brew install "gnutls"
brew install "go"
brew install "gsl"
brew install "ifstat"
brew install "libomp"
brew install "imagemagick"
brew install "imagemagick@6"
brew install "jq"
brew install "lazygit"
brew install "libclc"
brew install "libice"
brew install "librsync"
brew install "libsixel"
brew install "libsm"
brew install "libtermkey"
brew install "libvterm"
brew install "libxaw"
brew install "libxft"
brew install "libxinerama"
brew install "llvm"
brew install "luajit"
brew install "luv"
brew install "macos-term-size"
brew install "make"
brew install "mas"
brew install "mesa"
brew install "meson"
brew install "msgpack"
brew install "neofetch"
brew install "neovim"
brew install "opencl-clhpp-headers"
brew install "openjdk"
brew install "openssl@3"
brew install "pcre"
brew install "pkg-config"
brew install "putty"
brew install "pyright"
brew install "python@3.10"
brew install "python@3.8"
brew install "ranger"
brew install "rename"
brew install "ripgrep"
brew install "rlwrap"
brew install "rust"
brew install "switchaudio-osx"
brew install "tldr"
brew install "tmux"
brew install "tree"
brew install "vlang"
brew install "wget"
brew install "wireguard-go"
brew install "xterm"
brew install "felixkratz/formulae/fnnn", args: ["HEAD"]
brew install "felixkratz/formulae/sketchybar", args: ["HEAD"]
brew install "koekeishiya/formulae/skhd"
brew install --cask "1password-cli"
brew install --cask "alacritty"
brew install --cask "alfred"
brew install --cask "alt-tab"
brew install --cask "anaconda"
brew install --cask "authy"
brew install --cask "betterdiscord-installer"
brew install --cask "caprine"
brew install --cask "cleanshot"
brew install --cask "cutter"
brew install --cask "discord"
brew install --cask "electron"
brew install --cask "firefox"
brew install --cask "font-fira-code-nerd-font"
brew install --cask "font-hack-nerd-font"
brew install --cask "font-heavy-data-nerd-font"
brew install --cask "font-jetbrains-mono"
brew install --cask "font-jetbrains-mono-nerd-font"
brew install --cask "font-ligature-symbols"
brew install --cask "font-profont-nerd-font"
brew install --cask "font-symbols-only-nerd-font"
brew install --cask "fontforge"
brew install --cask "google-chrome"
brew install --cask "grammarly"
brew install --cask "hammerspoon"
brew install --cask "hex-fiend"
brew install --cask "inkscape"
brew install --cask "libreoffice"
brew install --cask "machoview"
brew install --cask "mono-mdk-for-visual-studio"
brew install --cask "mumble"
brew install --cask "onyx"
brew install --cask "powershell"
brew install --cask "sf-symbols"
brew install --cask "ubersicht"
brew install --cask "visual-studio"
brew install --cask "vlc"
brew install --cask "xquartz"
code --install-extension "aprilandjan.ascii-tree-generator"
code --install-extension "BitBelt.converttoasciiart"
code --install-extension "DanielSanMedium.dscodegpt"
code --install-extension "dooez.alt-catppuccin-vsc"
code --install-extension "GitHub.copilot"
code --install-extension "GitHub.github-vscode-theme"
code --install-extension "hars.CppSnippets"
code --install-extension "helixquar.asciidecorator"
code --install-extension "JakeWilson.vscode-picture"
code --install-extension "jbenden.c-cpp-flylint"
code --install-extension "jeff-hykin.better-cpp-syntax"
code --install-extension "l7ssha.tag-inserter"
code --install-extension "lolkush.quickstart"
code --install-extension "mgmcdermott.vscode-language-babel"
code --install-extension "Mohammed.simple-black-theme"
code --install-extension "ms-azuretools.vscode-docker"
code --install-extension "ms-python.python"
code --install-extension "ms-python.vscode-pylance"
code --install-extension "ms-vscode.cmake-tools"
code --install-extension "ms-vscode.cpptools"
code --install-extension "ms-vscode.cpptools-extension-pack"
code --install-extension "ms-vscode.cpptools-themes"
code --install-extension "ms-vscode.js-debug-nightly"
code --install-extension "ms-vscode.vscode-typescript-next"
code --install-extension "naumovs.color-highlight"
code --install-extension "npv2k1.theme-dracula-grey"
code --install-extension "rajeshroyal896.extended-html5-boilerplate"
code --install-extension "ritwickdey.LiveServer"
code --install-extension "shakram02.bash-beautify"
code --install-extension "shepelevstas.dumb-copy-paste"
code --install-extension "sidthesloth.html5-boilerplate"
code --install-extension "streetsidesoftware.code-spell-checker"
code --install-extension "TaodongWu.ejs-snippets"
code --install-extension "tcarlswing.custom-cpp-highlighting"
code --install-extension "twxs.cmake"
code --install-extension "VisualStudioExptTeam.intellicode-api-usage-examples"
code --install-extension "VisualStudioExptTeam.vscodeintellicode"
code --install-extension "walkme.HTML5-extension-pack"
code --install-extension "whizkydee.material-palenight-theme"
code --install-extension "xabikos.JavaScriptSnippets"
code --install-extension "yuritoledo.outrun-space"

echo "Installing Python files.."
sleep 1

python3 $HOME/installer.eq/install/get-pip.py
sh $HOME/installer.eq/py.sh 

echo "Pip installed!"
sleep 1
  
sudo -k # Invalidate previous sudo timestamp
sudo -v # Ask for sudo password upfront

# Check if sudo command succeeded (i.e., user entered correct password)
if [[ $? -eq 0 ]]; then

    read -p "Installer complete. Change Apple config? (Yes/No): " choice

    if [[ $choice == "Yes" || $choice == "yes" ]]; then
        sudo sh $HOME/installer.eq/install/defaults.sh
    elif [[ $choice == "No" || $choice == "no" ]]; then
        echo "Closing window"
    else
        echo "Invalid choice"
    fi

    read -p "Inject dotfiles + load fonts? (Yes/No): " choice

    if [[ $choice == "Yes" || $choice == "yes" ]]; then
        sudo sh $HOME/installer.eq/install/font.sh
    elif [[ $choice == "No" || $choice == "no" ]]; then
        echo "Closing window"
    else
        echo "Invalid choice"
    fi

else
    echo "Incorrect sudo password. Please enter sudo password again."

    sudo -k # Invalidate previous sudo timestamp
    sudo -v # Ask for sudo password again

    if [[ $? -eq 0 ]]; then
        # Prompt for installation options
        read -p "Installer complete. Change Apple config? (Yes/No): " choice

        if [[ $choice == "Yes" || $choice == "yes" ]]; then
            sudo sh $HOME/installer.eq/install/defaults.sh
        elif [[ $choice == "No" || $choice == "no" ]]; then
            echo "Closing window"
        else
            echo "Invalid choice"
        fi

        read -p "Inject dotfiles + load fonts? (Yes/No): " choice

        if [[ $choice == "Yes" || $choice == "yes" ]]; then
            sudo sh $HOME/installer.eq/install/font.sh
        elif [[ $choice == "No" || $choice == "no" ]]; then
            echo "Closing window"
        else
            echo "Invalid choice"
        fi
    else
        echo "Incorrect sudo password. Exiting..."
    fi

fi
